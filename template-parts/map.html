<div id="scrollLeft"></div>
<div id="scrollRight"></div>
<div id="tut">
    <div class="overlay-text">
        <h3>Ontdek!</h3>
        <p>
            Om de wijk te verkennen, kun je met je muis naar links of rechts bewegen! Door op de grijze illustraties te
            klikken kun je meer te weten komen over de verschillende onderwerpen!
        </p>
    </div>
    <span id="arrow-left">←</span>
    <span id="arrow-right">→</span>
</div>
<div id="scroller">
    <div class="map">
        <img id="bg" src="src/background.png">

        <div id="c1" class="hover"></div>
        <div id="c2" class="hover"></div>
        <div id="c3" class="hover"></div>
        <div id="c5" class="hover"></div>
        <div id="c6" class="hover"></div>
        <div id="c7" class="hover"></div>
    </div>
</div>

<style>
    #scroller::-webkit-scrollbar {
        display: none;
    }

    #scroller {
        -ms-overflow-style: none;
        scrollbar-width: none;
        overflow-x: auto;
        width: 100vw;
        height: 100vh;
    }
</style>

<script>

    // SCROLL NAV

    const scroller = document.querySelector('#scroller');

    const FRAME_DURATION = 1000 / 60;
    const getTime = typeof performance === "function" ? performance.now : Date.now;

    const documentCenter = ($('.map').width() - $(window).width()) / 2;
    const SCROLL_SPEED = 10;

    scroller.scroll(documentCenter, 0)

    let isScrolling = false;
    let scrollDirection = null;
    let lastDelta = getTime();

    function scrollDelta() {
        const now = getTime();
        const delta = (now - lastDelta) / FRAME_DURATION;

        const toScroll = (scrollDirection == "right" ? 1 : -1) * (SCROLL_SPEED * delta);

        scroller.scroll(scroller.scrollLeft + toScroll, 0)
        lastDelta = now;
        if (isScrolling) {
            requestAnimationFrame(scrollDelta);
        }
    }

    $("#scrollRight").mouseover(function () {
        scrollDirection = "right";
        isScrolling = true;
        lastDelta = getTime();
        $("#tut").fadeOut(500);

        scrollDelta();
    });
    $("#scrollLeft").mouseover(function () {
        scrollDirection = "left";
        isScrolling = true;
        lastDelta = getTime();
        $("#tut").fadeOut(500);

        scrollDelta();
    });
    $("#scrollRight").mouseout(function () {
        isScrolling = false;
    });
    $("#scrollLeft").mouseout(function () {
        isScrolling = false;
    });

    // HOVER EFFECT

    const TEXT_HOVER_1 = "Flexibiliteit in ontwikkelingen";
    const TEXT_HOVER_2 = "Modulair Bouwen & CLT";
    const TEXT_HOVER_3 = "Afname Auto Verkeer";
    const TEXT_HOVER_5 = "Agroforestry";
    const TEXT_HOVER_6 = "Water Veiligheid & Zekerheid";
    const TEXT_HOVER_7 = "Geothermie";

    $(".hover").hover(function () {

        const hoverID = $(this).attr("id");

        $(this).css("filter", "grayscale(0)");

        if (hoverID == "c1") {
            $("<h2>" + TEXT_HOVER_1 + "</h2>").hide().prependTo(".map").fadeIn(500);
        } else if (hoverID == "c2") {
            $("<h2>" + TEXT_HOVER_2 + "</h2>").hide().prependTo(".map").fadeIn(500);
        } else if (hoverID == "c3") {
            $("<h2>" + TEXT_HOVER_3 + "</h2>").hide().prependTo(".map").fadeIn(500);
        } else if (hoverID == "c5") {
            $("<h2>" + TEXT_HOVER_5 + "</h2>").hide().prependTo(".map").fadeIn(500);
        } else if (hoverID == "c6") {
            $("<h2>" + TEXT_HOVER_6 + "</h2>").hide().prependTo(".map").fadeIn(500);
        } else if (hoverID == "c7") {
            $("<h2>" + TEXT_HOVER_7 + "</h2>").hide().prependTo(".map").fadeIn(500);
        }

    }, function () {
        $("h2").fadeOut("500", function () {
            $(this).remove();
        });
    });

    // MODAL

    $(".hover").click(function () {

        const hoverID = $(this).attr("id");

        if (hoverID == "c1") {
            $.ajax({
                url: '/template-parts/article-1.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        } else if (hoverID == "c2") {
            $.ajax({
                url: '/template-parts/article-2.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        } else if (hoverID == "c3") {
            $.ajax({
                url: '/template-parts/article-3.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        } else if (hoverID == "c5") {
            $.ajax({
                url: '/template-parts/article-5.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        } else if (hoverID == "c6") {
            $.ajax({
                url: '/template-parts/article-6.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        } else if (hoverID == "c7") {
            $.ajax({
                url: '/template-parts/article-7.html',
                beforeSend: function () {

                },
                success: function (data) {
                    $("body").prepend(data);
                },
            });
        }
    });
</script>